(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(22)},16:function(e,t,a){},18:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(8),r=a.n(l),o=(a(16),a(1)),s=a(2),i=a(4),u=a(3),p=a(5);a(18);var m=function(e){return c.a.createElement("li",null,c.a.createElement("div",{className:"collapsible-header",onClick:function(t){return e.placeOnClick(e.place.venue.location.lat,e.place.venue.location.lng)}},e.place.venue.name),c.a.createElement("div",{className:"collapsible-body grey lighten-5"},c.a.createElement("div",null,"Type : ",e.place.venue.categories[0].name),c.a.createElement("div",null,c.a.createElement("p",null,e.place.venue.location.address?c.a.createElement("span",null,"Address ",e.place.venue.location.address," ",c.a.createElement("br",null)):null,e.place.venue.location.city),e.place.venue.location.postalCode?c.a.createElement("p",null,"Pin Code : ",e.place.venue.location.postalCode):null)))},d=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".collapsible");window.M.Collapsible.init(e,{})})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{id:"sidebar"},c.a.createElement("div",{className:"black-text right s1",onClick:function(t){return e.props.changeNav()}},c.a.createElement("i",{className:"material-icons"},"close")),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field col s12 left"},c.a.createElement("input",{id:"search",type:"text",className:"validate",onChange:function(t){return e.props.search(t.target.value)}}),c.a.createElement("label",{htmlFor:"search"},"Search"))),c.a.createElement("div",{id:"scroll"},c.a.createElement("ul",{className:"collapsible"},this.props.places.map(function(t){return c.a.createElement(m,{place:t,key:t.venue.id,placeOnClick:e.props.placeOnClick})}))))}}]),t}(n.Component),v="https://api.foursquare.com/v2/venues/explore?client_id=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/Neighbourhood-map"}).REACT_APP_CLIENT_ID,"&client_secret=").concat(Object({NODE_ENV:"production",PUBLIC_URL:"/Neighbourhood-map"}).REACT_APP_CLIENT_SECRET,"&limit=40"),h={Accept:"application/json"},f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={map:{},markers:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"addMarker",value:function(e){var t=this;this.state.markers.map(function(e){return e.remove()});var a=e.map(function(e){var a=(new window.mapboxgl.Popup).setText(e.venue.name);return(new window.mapboxgl.Marker).setLngLat([e.venue.location.lng,e.venue.location.lat]).setPopup(a).addTo(t.state.map)});this.setState({markers:a})}},{key:"flyToLocation",value:function(e,t){this.state.map.flyTo({center:[e,t],zoom:17,bearing:0,speed:1,curve:2,easing:function(e){return e}})}},{key:"componentWillReceiveProps",value:function(e){this.props.places!==e.places&&this.addMarker(e.places),this.props.lng!==e.lng&&this.props.lat!==e.lat&&this.flyToLocation(e.lng,e.lat)}},{key:"componentDidMount",value:function(){window.mapboxgl.accessToken=Object({NODE_ENV:"production",PUBLIC_URL:"/Neighbourhood-map"}).REACT_APP_MAPBOX_TOKEN;var e=new window.mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v9",center:[88.3639,22.572],zoom:11});e.on("error",function(e){console.log(e)}),console.log(e),this.setState({map:e})}},{key:"render",value:function(){return c.a.createElement("section",{className:"map-container",role:"application"},c.a.createElement("div",{id:"map"}))}}]),t}(n.Component),E=a(9),g=a.n(E),b=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={places:[],lat:0,lng:0,searchedPlaces:[],error:0},a.placeOnClick=function(e,t){a.setState({lat:e}),a.setState({lng:t})},a.changeNav=function(){var e=document.getElementById("sidebar");"block"===e.style.display?e.style.display="none":e.style.display="block"},a.search=function(e){var t=new RegExp(g()(e),"i");if(e){var n=a.state.places.filter(function(e){return t.test(e.venue.name)});a.setState({searchedPlaces:n})}else a.setState({searchedPlaces:a.state.places})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;fetch("".concat(v,"&v=20180101&near=kolkata"),{headers:h}).then(function(e){return e.json()}).then(function(e){return e.response.groups[0].items}).catch(function(e){return alert("data not loaded properly")}).then(function(t){console.log(t),!t||t.error?e.setState({error:1}):(e.setState({places:t}),e.setState({searchedPlaces:t}))})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"App"},c.a.createElement(d,{changeNav:this.changeNav,places:this.state.searchedPlaces,placeOnClick:this.placeOnClick,search:this.search}),c.a.createElement("div",{id:"main"},c.a.createElement("nav",{className:"row"},c.a.createElement("div",{className:"black-text col s1 center",onClick:function(t){return e.changeNav()}},c.a.createElement("i",{className:"material-icons"},"dehaze")),c.a.createElement("h2",{className:"center black-text"},this.state.error?"Data not loaded.":"Kolkata")),c.a.createElement(f,{places:this.state.searchedPlaces,lat:this.state.lat,lng:this.state.lng})))}}]),t}(n.Component),k=a(10);a.n(k).a.config(),r.a.render(c.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator?navigator.serviceWorker.register("./serviceWorker.js").then(function(e){console.log("Service worker registration succeeded:",e)},function(e){console.log("Service worker registration failed:",e)}):console.log("Service workers are not supported.")}},[[11,2,1]]]);
//# sourceMappingURL=main.b077c0e3.chunk.js.map