{"version":3,"sources":["Place.js","sidebar.js","APIRequest.js","Map.js","App.js","index.js"],"names":["Place","props","react_default","a","createElement","className","onClick","event","placeOnClick","place","venue","location","lat","lng","name","categories","address","city","postalCode","SideBar","document","addEventListener","elems","querySelectorAll","window","M","Collapsible","init","_this","this","id","changeNav","type","onChange","e","search","target","value","htmlFor","places","map","src_Place","key","Component","url","concat","process","REACT_APP_CLIENT_ID","REACT_APP_CLIENT_SECRET","headers","Accept","Map","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","markers","_this2","m","remove","popup","mapboxgl","Popup","setText","Marker","setLngLat","setPopup","addTo","setState","flyTo","center","zoom","bearing","speed","curve","easing","t","addMarker","flyToLocation","accessToken","REACT_APP_MAPBOX_TOKEN","container","style","on","console","log","role","App","searchedPlaces","error","sidebar","getElementById","display","query","match","RegExp","escapeRegExp","p","filter","test","fetch","then","res","json","data","response","groups","items","catch","alert","_this3","src_Map","Dotenv","config","ReactDOM","render","src_App_0","navigator","serviceWorker","register","registration"],"mappings":"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","file":"static/js/main.b077c0e3.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nfunction Place(props) {\r\n\treturn (\r\n\t\t<li>\r\n\t      <div className=\"collapsible-header\" onClick={(event)=>props.placeOnClick(props.place.venue.location.lat,props.place.venue.location.lng)}>{props.place.venue.name}</div>\r\n\t      <div className=\"collapsible-body grey lighten-5\">\r\n\t      \t<div>Type : {props.place.venue.categories[0].name}</div>\r\n\t      \t<div>\r\n\t      \t\t<p>{(props.place.venue.location.address)?\r\n\t      \t\t\t(<span>Address {props.place.venue.location.address} <br/></span>):null}\r\n\t      \t\t\t{props.place.venue.location.city}\r\n\t      \t\t</p>\r\n\t      \t\t{(props.place.venue.location.postalCode)?\r\n\t      \t\t(<p>Pin Code : {props.place.venue.location.postalCode}</p>):null}\r\n\t      \t</div>\r\n\r\n\t      </div>\r\n\t    </li>\r\n\t\t)\r\n}\r\nexport default Place;","import React , { Component } from 'react';\r\nimport Place from './Place'\r\n\r\nclass SideBar extends Component {\r\n\tcomponentDidMount() {\r\n\t\tdocument.addEventListener('DOMContentLoaded', function() {\r\n\t\t    var elems = document.querySelectorAll('.collapsible');\r\n\t\t    var instances = window.M.Collapsible.init(elems, {});\r\n\t\t  });\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"sidebar\">\r\n\t\t\t    <div className=\"black-text right s1\" onClick={(event)=>this.props.changeNav()}><i className=\"material-icons\" >close</i>\r\n\t\t\t    \t</div>\r\n\t\t\t    <div className=\"row\">  \r\n\t\t\t        <div className=\"input-field col s12 left\">\r\n\t\t\t          <input id=\"search\" type=\"text\" className=\"validate\" onChange={e => this.props.search(e.target.value)}/>\r\n\t\t\t          <label htmlFor=\"search\">Search</label>\r\n\t\t\t        </div>\r\n\t\t\t    </div>\r\n\t\t\t    <div id=\"scroll\">\r\n\t\t\t             <ul className=\"collapsible\">\r\n\t\t\t             {this.props.places.map((place)=>{\r\n\t\t\t             \treturn <Place  place={place} key={place.venue.id} placeOnClick={this.props.placeOnClick}/>\r\n\t\t\t             }\r\n\t\t\t             )}\r\n\t\t\t\t\t\t  </ul>\r\n\t\t\t    </div>\r\n\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}\r\nexport default SideBar;","const url = `https://api.foursquare.com/v2/venues/explore?client_id=${process.env.REACT_APP_CLIENT_ID}&client_secret=${process.env.REACT_APP_CLIENT_SECRET}&limit=40`\r\n\r\nconst headers = {\r\n  'Accept': 'application/json'\r\n}\r\nexport const getAll = () =>\r\n  fetch(`${url}&v=20180101&near=kolkata`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.response.groups[0].items)\r\n    .catch( e => alert(\"data not loaded properly\"))","import React , {Component} from 'react'\r\n\r\n\r\nclass Map extends Component {\r\n\tconstructor(props){\r\n\t    super(props);\r\n\t    this.state = {\r\n\t    \tmap : {},\r\n\t    \tmarkers :[]\r\n\t     }\r\n\t}\r\n\taddMarker(places) {\r\n\t\tthis.state.markers.map((m)=> m.remove())  //delete current markers\r\n\t\tlet markers=places.map((place) => {\r\n\t\t\tconst popup = new window.mapboxgl.Popup()\r\n    \t\t\t\t.setText(place.venue.name);\r\n\t\t\treturn new window.mapboxgl.Marker()\r\n\t\t        \t.setLngLat([place.venue.location.lng,place.venue.location.lat])\r\n\t\t        \t.setPopup(popup)\r\n        \t\t\t.addTo(this.state.map);\t\t\r\n\t\t})\r\n\t\tthis.setState({markers})\r\n\t}\r\n\tflyToLocation(lng,lat) {\r\n\t\t  this.state.map.flyTo({\r\n\t\t        center: [lng,lat],\r\n\t\t        zoom: 17,\r\n\t\t        bearing: 0,\r\n\t\t        speed: 1, \r\n\t\t        curve: 2,\r\n\t\t        easing: function (t) {\r\n\t\t            return t;\r\n\t\t        }\r\n\t\t    });\r\n\t}\r\n\tcomponentWillReceiveProps(props) {\r\n\t\tif(this.props.places!==props.places){\r\n\t\t\tthis.addMarker(props.places);\r\n\t\t}\r\n\t\tif(this.props.lng!==props.lng && this.props.lat!==props.lat) {\r\n\t\t\tthis.flyToLocation(props.lng,props.lat);\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\twindow.mapboxgl.accessToken = process.env.REACT_APP_MAPBOX_TOKEN;\r\n\t\tvar map = new window.mapboxgl.Map({\r\n\t\t    container: 'map',\r\n\t\t    style: 'mapbox://styles/mapbox/streets-v9', \r\n\t\t    center: [88.3639,22.572], \r\n\t\t    zoom: 11 \r\n\t\t});\r\n\t\tmap.on('error',function(e) {\r\n\t\t\tconsole.log(e);\r\n\t\t})\r\n\t\tconsole.log(map)\r\n\t\tthis.setState({map})\r\n  }\r\n\t\r\n\trender() {\t\r\n\t\treturn (\r\n\t\t\t<section className=\"map-container\" role=\"application\"><div id=\"map\"></div></section>\r\n\t\t\t)\r\n\t}\r\n}\r\nexport default Map;","import React, { Component } from 'react';\r\n\r\nimport './App.css';\r\nimport SideBar from './sidebar'\r\nimport * as APIRequest from './APIRequest'\r\nimport Map from './Map'\r\nimport escapeRegExp from 'escape-string-regexp'\r\n\r\nclass App extends Component {\r\n  state ={\r\n    places : [],\r\n    lat : 0 ,\r\n    lng : 0 ,\r\n    searchedPlaces :[],\r\n    error : 0\r\n  }\r\n  placeOnClick=(lat,lng)=>{\r\n    this.setState({lat})\r\n    this.setState({lng})\r\n  }\r\n  changeNav = ()=> {\r\n      const sidebar=document.getElementById(\"sidebar\");\r\n    if(sidebar.style.display===\"block\") {\r\n      sidebar.style.display = \"none\";\r\n    }\r\n    else{\r\n      sidebar.style.display = \"block\";\r\n    }\r\n  }\r\n  search=(query) =>{\r\n    const match = new RegExp(escapeRegExp(query),'i')\r\n    if(query){\r\n      let p=this.state.places.filter(place => match.test(place.venue.name))\r\n      this.setState({searchedPlaces : p})\r\n    }\r\n    else {\r\n      this.setState({searchedPlaces : this.state.places})\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    APIRequest.getAll().then((res)=>{\r\n      console.log(res);\r\n      if(!res || res.error) {\r\n        this.setState({error : 1})\r\n      }\r\n      else {\r\n        this.setState({places : res })\r\n        this.setState({searchedPlaces : res })\r\n      }\r\n    })\r\n    }\r\n  render() {\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <SideBar changeNav={this.changeNav} places={this.state.searchedPlaces} placeOnClick={this.placeOnClick} search={this.search}/>\r\n        <div id=\"main\">\r\n          <nav className=\"row\">\r\n          <div  className=\"black-text col s1 center\" onClick={(event)=>this.changeNav()}><i className=\"material-icons\" >dehaze</i></div>\r\n          <h2 className=\"center black-text\">{(this.state.error) ? \"Data not loaded.\": \"Kolkata\" }</h2>\r\n          </nav>\r\n          <Map places={this.state.searchedPlaces} lat={this.state.lat} lng={this.state.lng}/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport Dotenv from 'dotenv';\r\n\r\nDotenv.config();\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nif ('serviceWorker' in navigator) {\r\n  // Register a service worker hosted at the root of the\r\n  // site using the default scope.\r\n  navigator.serviceWorker.register('./serviceWorker.js').then(function(registration) {\r\n    console.log('Service worker registration succeeded:', registration);\r\n  }, /*catch*/ function(error) {\r\n    console.log('Service worker registration failed:', error);\r\n  });\r\n} else {\r\n  console.log('Service workers are not supported.');\r\n}\r\n"],"sourceRoot":""}